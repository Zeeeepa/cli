version: 5.1.1
session: 67f00511acbd9ccac373edf7
steps:
  - prompt: Only TD_* values should be available to TestDriver
    commands:
      - command: exec
        lang: shell
        linux: |
          # Assert SOME_SECRET is empty
          if [ ! -z "$SOME_SECRET" ]; then
            echo "SOME_SECRET should be empty but was '$SOME_SECRET'"
          fi

          # Assert TD_SOME_SECRET has correct value when using $ 
          if [ "$TD_SOME_SECRET" != "secrets.SOME_SECRET" ]; then
            echo "TD_SOME_SECRET should be 'secrets.SOME_SECRET' but was '$TD_SOME_SECRET'"
          fi

          # Assert TD_SOME_SECRET has correct value when using curly braces
          if [ "${TD_SOME_SECRET}" != "secrets.SOME_SECRET" ]; then
            echo "TD_SOME_SECRET should be 'secrets.SOME_SECRET' but was '$TD_SOME_SECRET'"
          fi
  # Normal test behavior now...
  - prompt: launch chrome
    commands:
      - command: exec
        lang: shell
        linux: |
          jumpapp google-chrome --disable-fre --no-default-browser-check --no-first-run --guest "${TD_WEBSITE}" &
          exit
        mac: |
          open -na "Google Chrome" --args --disable-fre --no-default-browser-check --no-first-run --guest "${TD_WEBSITE}" &
          exit
        windows: |
          Start-Process "C:\Users\testdriver\chrome\win64-137.0.7151.70\chrome-win64\chrome.exe" -ArgumentList "--start-maximized --disable-infobars --disable-fre --no-default-browser-check --no-first-run --guest", "${TD_WEBSITE}";
          exit
      - command: wait-for-text
        text: ${TD_WEBSITE}
        timeout: 30000
